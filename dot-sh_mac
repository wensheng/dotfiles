# This file is sourced by .zshrc on MacOS
# These are installed with 'brew install'
# - libpq
# - mysql-client
# - nvm
# - neovim
# - pyenv
# - pyenv-virtualenv
# - zsh-completions
#

export PATH="/opt/homebrew/bin:$PATH"

# fnm was install by 'brew install fnm'
if [[ $USER == wwang1 ]]; then                                                                                                                                                    
  # nvm at work
  # nvm was NOT installed by brew
  export NVM_DIR="$([ -z "${XDG_CONFIG_HOME-}" ] && printf %s "${HOME}/.nvm" || printf %s "${XDG_CONFIG_HOME}/nvm")"
  [ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"  # This loads nvm
  # [ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"  # This loads nvm bash_completion
  # pyenv at work
  export PYENV_ROOT="$HOME/.pyenv"
  export PATH="$PYENV_ROOT/bin:$PATH"
  eval "$(pyenv init -)"
else
  FNM_PATH="$HOME/.local/share/fnm"
  if [ -d "$FNM_PATH" ]; then
    export PATH="$HOME/.local/share/fnm:$PATH"
    eval "`fnm env`"
  fi
fi


if type brew &>/dev/null; then
  FPATH=$(brew --prefix)/share/zsh-completions:$FPATH
  autoload -Uz compinit
  compinit
fi

# libpq and mysql-client are install with 'brew install'
# both libpq and mysql-client is keg-only and not symlinked into /opt/homebrew
export PATH="/opt/homebrew/opt/libpq/bin:/opt/homebrew/opt/mysql-client/bin:$PATH"
export PATH="/opt/homebrew/opt/openjdk@21/bin:$PATH"
# export LDFLAGS="-L/opt/homebrew/opt/libpq/lib"
# export CPPFLAGS="-I/opt/homebrew/opt/libpq/include"
# export PKG_CONFIG_PATH="/opt/homebrew/opt/libpq/lib/pkgconfig"
# export LDFLAGS="-L/opt/homebrew/opt/mysql-client/lib"
# export CPPFLAGS="-I/opt/homebrew/opt/mysql-client/include"
# export PKG_CONFIG_PATH="/opt/homebrew/opt/mysql-client/lib/pkgconfig"
export CPPFLAGS="-I/opt/homebrew/opt/openjdk@21/include"
# for redis
# service: brew services start redis
# or just: /opt/homebrew/opt/redis/bin/redis-server /opt/homebrew/etc/redis.conf

test -e "${HOME}/.iterm2_shell_integration.zsh" && source "${HOME}/.iterm2_shell_integration.zsh"
alias dir='ls -lrtG'
alias df='df -H'
alias code='/Applications/Visual\ Studio\ Code.app/Contents/MacOS/Electron'
alias cop='cb copy'
#test -e /Users/wwang1/.iterm2_shell_integration.zsh && source /Users/wwang1/.iterm2_shell_integration.zsh || true                                                                   
